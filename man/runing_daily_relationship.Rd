% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/runing_daily_relationship.R
\name{runing_daily_relationship}
\alias{runing_daily_relationship}
\title{Run Daily Rolling Climate-Response Analysis}
\usage{
runing_daily_relationship(
  bio_data,
  climate_data,
  lastdays,
  formula_model,
  refday = 305,
  yearneed = 2,
  model_type = "lm",
  rollwin = 1
)
}
\arguments{
\item{bio_data}{A data frame containing the biological response data. Must include the response variable defined in \code{formula_model}, \code{year}, and a site identifier.}

\item{climate_data}{A data frame of daily climate values. Must include columns for \code{year}, \code{yday}, and the climate variable defined in \code{formula_model}.}

\item{lastdays}{Integer. Number of days before the reference day to include in the rolling analysis. For example, \code{lastdays = 365} evaluates the full previous year.}

\item{formula_model}{A formula specifying the model to fit (e.g., \code{log.seed ~ TMEAN}). The right-hand side is used to extract the relevant climate variable.}

\item{refday}{Integer. Reference day-of-year (DOY) from which to compute days backwards. Default is 305 (November 1st).}

\item{yearneed}{Integer. Minimum number of years to retain when evaluating historical climate data. Default is 2.}

\item{model_type}{Character. Type of model to fit: either \code{'lm'} (linear regression) or \code{'betareg'} (beta regression). Default is \code{'lm'}.}

\item{rollwin}{Integer. Size of the rolling average window applied to the climate variable. Default is 1 (i.e., daily resolution without smoothing).}
}
\value{
A data frame containing one row per day (reversed time), with columns:
\itemize{
\item \code{days.reversed}: Days before the reference date.
\item \code{estimate}, \code{p.value}, \code{r.squared}: Model coefficients and fit statistics.
\item \code{correlation}, \code{pvalue.cor}: Spearman or Pearson correlation between the response and climate variable.
}
}
\description{
This function performs a daily moving window analysis to estimate the relationship between a biological response (e.g., seed production)
and daily climate variables. For each day prior to a reference date, the function computes a rolling average climate value and fits a model
(e.g., linear or beta regression) to estimate effect sizes and correlation with the biological variable.
}
\details{
This function aligns climate data with biological observations across years. It applies a rolling average to the climate variable over
the specified \code{lastdays}, centered on each day before \code{refday}. For each day, the function fits a univariate model using the
provided \code{formula_model}, returning slope estimates, correlation statistics, and model fit metrics.

This is the preparatory step for methods like the Climate Sensitivity Profile (CSP) or peak signal detection.
}
\examples{
\dontrun{
result <- runing_daily_relationship(
  bio_data = seed_data,
  climate_data = climate_data,
  lastdays = 365,
  refday = 305,
  formula_model = formula('log.seed ~ TMEAN')
)
}

}
\seealso{
\code{\link{runing_csp}}, \code{\link{runing_peak_detection}}, \code{\link{daily_parameters_rolling_climate}}
}
