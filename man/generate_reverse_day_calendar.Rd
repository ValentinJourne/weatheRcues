% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_reverse_day_calendar.R
\name{generate_reverse_day_calendar}
\alias{generate_reverse_day_calendar}
\title{Generate Reverse Calendar Mapping for Days Before a Reference Date}
\usage{
generate_reverse_day_calendar(
  refday = 274,
  lastdays = 1095,
  yearback = 3,
  start_year = 1946
)
}
\arguments{
\item{refday}{Integer. The reference day of year (DOY) to count backwards from. For example, November 1st is 305. Default is 274.}

\item{lastdays}{Integer. Number of days to count backward from the reference date. Default is 1095 (approximately 3 years).}

\item{yearback}{Integer. Number of full years of historical data needed to cover \code{lastdays}.
Must be ≥2 if \code{lastdays > 365} or ≥3 if \code{lastdays > 730}. Default is 3.}

\item{start_year}{Integer. The base year from which the calendar sequence begins. Default is 1946.
This is useful only for display or internal indexing.}
}
\value{
A data frame with the following columns:
\describe{
\item{DATE}{The actual calendar date.}
\item{YEAR}{The year of the date. Reset to most recent year used for plotting convenience.}
\item{MONTHab}{Abbreviated month name (e.g., "Jan", "Feb").}
\item{DOY}{Day of the year (1–366).}
\item{days.reversed}{The number of days prior to the reference day (1 = the day before refday).}
}
}
\description{
This function builds a calendar that maps days counted backward from a given reference date
(e.g., November 1st = DOY 305) to their corresponding calendar dates, months, years, and
day-of-year (DOY).
}
\details{
For instance, a \code{days.reversed} value of 10 indicates the date 10 days before the specified \code{refday}.

The function internally creates a synthetic date range starting from \code{start_year} and spanning multiple years
(1946 to 1953 by default) to simulate a "calendar of the past." It then identifies reference days in that
sequence and maps the days preceding each reference day for a given number of years (\code{yearback}).
The result is a tidy data frame that shows the relationship between reverse days and actual calendar dates.

Input consistency is checked, and an error is returned if \code{lastdays} is too long for the specified \code{yearback}.
}
\examples{
# Generate 600 days of lagged calendar data prior to November 1st
calendar_data <- generate_reverse_day_calendar(refday = 305, lastdays = 600, yearback = 3)
head(calendar_data)

}
