% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/daily_parameters_rolling_climate.R
\name{daily_parameters_rolling_climate}
\alias{daily_parameters_rolling_climate}
\title{Run Moving Window Regression and Correlation Analysis}
\usage{
daily_parameters_rolling_climate(
  bio_data = bio_data,
  rolling.data = rolling.data,
  method = "spearman",
  formula_model = formula("log.seed~temperature"),
  model_type = "lm"
)
}
\arguments{
\item{bio_data}{A data frame or tibble containing biological data. Must include columns for \code{year},
\code{sitenewname}, \code{log.seed}, and optionally \code{plotname.lon.lat}.}

\item{rolling.data}{A data frame or tibble with rolling climate variables. Must include a \code{days.reversed}
column and a climate covariate (e.g., \code{rolling_avg_tmean}).}

\item{method}{Character. The correlation method to use (\code{"spearman"}, \code{"pearson"}, or \code{"kendall"}).
Default is \code{"spearman"}.}

\item{formula_model}{A formula defining the relationship to be modeled (e.g., \code{log.seed ~ rolling_avg_tmean}).
The response variable must exist in \code{bio_data}, and the predictor in \code{rolling.data}.}

\item{model_type}{Character. Type of regression model to use. Options are \code{"lm"} (linear model, default) or \code{"betareg"}
(beta regression for bounded outcomes between 0 and 1).}
}
\value{
A data frame including:
\itemize{
\item \code{sitenewname}, \code{plotname.lon.lat}: Site identifiers.
\item \code{days.reversed}: Time window in reversed day units.
\item \code{term}, \code{estimate}, \code{std.error}, \code{p.value}: Model slope summary.
\item \code{r.squared}, \code{logLik}: Model performance metrics.
\item \code{correlation}, \code{pvalue.cor}, \code{correlation.se}: Correlation stats.
}
}
\description{
This function performs a moving window analysis to explore how a climate covariate (e.g., temperature)
influences a biological response (e.g., seed production) over time. It combines regression modeling and
correlation testing within rolling windows to identify periods of strong climate-response relationships.
}
\details{
The function:
\itemize{
\item Merges biological data with rolling climate data.
\item Computes correlation coefficients and their p-values for each moving window.
\item Fits regression models for each time window and extracts slopes, standard errors, RÂ², and log-likelihood.
\item Calculates standard error for the correlation using the sample size.
}

It is particularly useful for identifying lagged weather cues in time series datasets.
}
\examples{
# Simulate small example
data <- data.frame(
  year = 2000:2019,
  sitenewname = rep("site1", 20),
  log.seed = rnorm(20),
  plotname.lon.lat = rep("1_1", 20)
)
rolling.data <- data.frame(
  days.reversed = 1:365,
  rolling_avg_tmean = rnorm(365),
  year = 2017
)
formula_used <- formula(log.seed ~ rolling_avg_tmean)

result <- runing_moving_window_analysis(
  bio_data = data,
  rolling.data = rolling.data,
  method = "spearman",
  formula_model = formula_used
)

}
